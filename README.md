# –í–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è —Ñ–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ (Composite Pattern)

## –û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏

–í —ç—Ç–æ–º –∑–∞–¥–∞–Ω–∏–∏ –≤—ã —Ä–µ–∞–ª–∏–∑—É–µ—Ç–µ –∏–µ—Ä–∞—Ä—Ö–∏—é –æ–±—ä–µ–∫—Ç–æ–≤ –¥–ª—è –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã. –í—ã –ø–æ–∑–Ω–∞–∫–æ–º–∏—Ç–µ—Å—å —Å –ø–∞—Ç—Ç–µ—Ä–Ω–æ–º **Composite (–ö–æ–º–ø–æ–Ω–æ–≤—â–∏–∫)** ‚Äî –æ–¥–Ω–∏–º –∏–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

### –°—É—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω–∞

–ü–∞—Ç—Ç–µ—Ä–Ω Composite –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–±—ä–µ–¥–∏–Ω—è—Ç—å –æ–±—ä–µ–∫—Ç—ã –≤ –¥—Ä–µ–≤–æ–≤–∏–¥–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –Ω–∏–º–∏ –∫–∞–∫ —Å –µ–¥–∏–Ω—ã–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏. –í –Ω–∞—à–µ–π –∑–∞–¥–∞—á–µ:

- **–§–∞–π–ª** ‚Äî —ç—Ç–æ "–ª–∏—Å—Ç" –¥–µ—Ä–µ–≤–∞ (–Ω–µ –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –¥—Ä—É–≥–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤)
- **–ü–∞–ø–∫–∞** ‚Äî —ç—Ç–æ "—É–∑–µ–ª" –¥–µ—Ä–µ–≤–∞ (–º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ñ–∞–π–ª—ã –∏ –¥—Ä—É–≥–∏–µ –ø–∞–ø–∫–∏)

–º–µ—Ç–æ–¥ [`getSize()`](include/Node.hpp:11) –≤–µ–¥—ë—Ç —Å–µ–±—è –ø–æ-—Ä–∞–∑–Ω–æ–º—É –¥–ª—è —Ñ–∞–π–ª–æ–≤ –∏ –ø–∞–ø–æ–∫:
- –î–ª—è —Ñ–∞–π–ª–∞ ‚Äî –ø—Ä–æ—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –µ–≥–æ —Ä–∞–∑–º–µ—Ä
- –î–ª—è –ø–∞–ø–∫–∏ ‚Äî —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ –æ–±—Ö–æ–¥–∏—Ç –≤—Å—ë –≤–Ω—É—Ç—Ä–∏ –∏ —Å—á–∏—Ç–∞–µ—Ç –æ–±—â–∏–π –≤–µ—Å

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ include/
‚îÇ   ‚îú‚îÄ‚îÄ Node.hpp          # –ë–∞–∑–æ–≤—ã–π –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –∫–ª–∞—Å—Å
‚îÇ   ‚îú‚îÄ‚îÄ File.hpp          # –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∫–ª–∞—Å—Å–∞ File
‚îÇ   ‚îî‚îÄ‚îÄ Directory.hpp     # –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∫–ª–∞—Å—Å–∞ Directory
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ File.cpp          # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è File (–Ω—É–∂–Ω–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å)
‚îÇ   ‚îî‚îÄ‚îÄ Directory.cpp     # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è Directory (–Ω—É–∂–Ω–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å)
‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îî‚îÄ‚îÄ test_runner.cpp   # –¢–µ—Å—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
‚îú‚îÄ‚îÄ CMakeLists.txt        # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–±–æ—Ä–∫–∏
‚îî‚îÄ‚îÄ README.md             # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

---

## –ß—Ç–æ –Ω—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å

### 1. –ö–ª–∞—Å—Å `File`

–§–∞–π–ª [`File.cpp`](src/File.cpp) –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é:

```cpp
File::File(std::string name, size_t size);
size_t File::getSize() const;
```

### 2. –ö–ª–∞—Å—Å `Directory`

–§–∞–π–ª [`Directory.cpp`](src/Directory.cpp) –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é:

```cpp
Directory::Directory(std::string name);
void Directory::add(std::shared_ptr<Node> node);
size_t Directory::getSize() const;
```
---

## –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```cpp
// –°–æ–∑–¥–∞—ë–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É:
// Root (Folder)
// ‚îú‚îÄ‚îÄ doc.txt (100 bytes)
// ‚îî‚îÄ‚îÄ Images (Folder)
//     ‚îú‚îÄ‚îÄ photo.png (500 bytes)
//     ‚îî‚îÄ‚îÄ icon.png (50 bytes)

auto root = std::make_shared<Directory>("root");
auto file1 = std::make_shared<File>("doc.txt", 100);

auto imgDir = std::make_shared<Directory>("images");
auto img1 = std::make_shared<File>("photo.png", 500);
auto img2 = std::make_shared<File>("icon.png", 50);

imgDir->add(img1);
imgDir->add(img2);

root->add(file1);
root->add(imgDir);

// –†–∞–∑–º–µ—Ä root = 100 + 500 + 50 = 650
std::cout << root->getSize() << std::endl;  // 650
```

---

## –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

### –õ–æ–∫–∞–ª—å–Ω–æ (—Å—Ç—É–¥–µ–Ω—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)

```bash
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
cmake -S . -B build

# –°–±–æ—Ä–∫–∞
cmake --build build

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
./build/test_runner
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –°—Ç–∞—Ä—Ç–æ–≤—ã–π –∫–æ–¥ —Å–æ–¥–µ—Ä–∂–∏—Ç TODO-–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏. –¢–µ—Å—Ç—ã –±—É–¥—É—Ç –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–π –≤ [`src/File.cpp`](src/File.cpp) –∏ [`src/Directory.cpp`](src/Directory.cpp).

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å –≥–æ—Ç–æ–≤—ã–º —Ä–µ—à–µ–Ω–∏–µ–º

### –° GitHub Actions

–¢–µ—Å—Ç—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∫–∞–∂–¥–æ–º push –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —á–µ—Ä–µ–∑ —Ñ–∞–π–ª [`.github/workflows/classroom.yml`](.github/workflows/classroom.yml).

---

## –ß—Ç–æ –≤—ã —É–∑–Ω–∞–µ—Ç–µ

1. **–ü–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º** ‚Äî –æ–¥–∏–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, —Ä–∞–∑–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
2. **–†–µ–∫—É—Ä—Å–∏—è** ‚Äî –æ–±—Ö–æ–¥ –¥—Ä–µ–≤–æ–≤–∏–¥–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä
3. **–£–º–Ω—ã–µ —É–∫–∞–∑–∞—Ç–µ–ª–∏** ‚Äî `std::shared_ptr` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞–º—è—Ç—å—é
4. **–ü–∞—Ç—Ç–µ—Ä–Ω Composite** ‚Äî –∫–∞–∫ —Å—Ç—Ä–æ–∏—Ç—å –¥—Ä–µ–≤–æ–≤–∏–¥–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

---

## –¢–µ—Å—Ç—ã

–í —Ñ–∞–π–ª–µ [`test_runner.cpp`](tests/test_runner.cpp) —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ —Ç–µ—Å—Ç—ã:

| –¢–µ—Å—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| `testFileSystem()` | –û—Å–Ω–æ–≤–Ω–æ–π —Ç–µ—Å—Ç —Å –≤–ª–æ–∂–µ–Ω–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π |
| `testEmptyDirectory()` | –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—É—Å—Ç–æ–π –ø–∞–ø–∫–∏ |
| `testDeepNesting()` | –ì–ª—É–±–æ–∫–∞—è –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å –ø–∞–ø–æ–∫ |
| `testMultipleFiles()` | –ù–µ—Å–∫–æ–ª—å–∫–æ —Ñ–∞–π–ª–æ–≤ –≤ –ø–∞–ø–∫–µ |
| `testMixedContent()` | –°–º–µ—à–∞–Ω–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ (—Ñ–∞–π–ª—ã + –ø–∞–ø–∫–∏ + –ø—É—Å—Ç—ã–µ –ø–∞–ø–∫–∏) |
| `testZeroSizeFile()` | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–æ–≤ –Ω—É–ª–µ–≤–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ (–≤–∞–∂–Ω–æ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –ª–æ–≥–∏–∫–∏) |
| `testNullptrHandling()` | –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ nullptr (–∑–∞—â–∏—Ç–Ω–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ) |

### –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏

–î–ª—è –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –æ–± –æ—à–∏–±–∫–∞—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è:

```cpp
void check(bool condition, const std::string& message);
```

–ü—Ä–∏ –ø—Ä–æ–≤–∞–ª–µ —Ç–µ—Å—Ç–∞ –≤—ã–≤–æ–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –∑–∞–≤–µ—Ä—à–∞–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º—É —Å –∫–æ–¥–æ–º –æ—à–∏–±–∫–∏ 1 (–¥–ª—è –∞–≤—Ç–æ–ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ CI/CD).

---

–£–¥–∞—á–∏! üöÄ
